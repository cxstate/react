{"version":3,"file":"react.es5.js","sources":["../src/react.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { MachineDef, Service, SendFn, CurrentMachineState, interpret } from '@cxstate/cxstate';\n\ninterface HookState<ContextType> {\n  path: string\n  context: ContextType;\n}\n\nexport function useMachine<ContextType>(machineDef: MachineDef<ContextType>) :[CurrentMachineState<ContextType>, SendFn] {\n  const [service] = useState<Service<ContextType>>(\n    () => interpret<ContextType>(machineDef),\n  );\n  const [state, setState] = useState<HookState<ContextType>>({\n    path: service.path(),\n    context: service.context(),\n  });\n  useEffect(\n    () => service.onTransition((context: ContextType, path: string) => {\n      setState({context, path});\n    }),\n    [service, setState],\n  );\n  return [\n    {\n      ...state,\n      matchesOne: service.matchesOne,\n      matchesNone: service.matchesNone,\n    },\n    service.send,\n  ];\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;SAQgB,UAAU,CAAc,UAAmC;IAClE,IAAA,oEAAO,CAEZ;IACI,IAAA;;;MAGJ,EAHK,aAAK,EAAE,gBAGZ,CAAC;IACH,SAAS,CACP,cAAM,OAAA,OAAO,CAAC,YAAY,CAAC,UAAC,OAAoB,EAAE,IAAY;QAC5D,QAAQ,CAAC,EAAC,OAAO,SAAA,EAAE,IAAI,MAAA,EAAC,CAAC,CAAC;KAC3B,CAAC,GAAA,EACF,CAAC,OAAO,EAAE,QAAQ,CAAC,CACpB,CAAC;IACF,OAAO;8BAEA,KAAK,KACR,UAAU,EAAE,OAAO,CAAC,UAAU,EAC9B,WAAW,EAAE,OAAO,CAAC,WAAW;QAElC,OAAO,CAAC,IAAI;KACb,CAAC;CACH;;;;"}