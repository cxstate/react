{"version":3,"file":"react.umd.js","sources":["../src/react.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { MachineDef, Service, SendFn, CurrentMachineState, interpret } from '@cxstate/cxstate';\n\ninterface HookState<ContextType> {\n  path: string\n  context: ContextType;\n}\n\nexport function useMachine<ContextType>(machineDef: MachineDef<ContextType>) :[CurrentMachineState<ContextType>, SendFn] {\n  const [service] = useState<Service<ContextType>>(\n    () => interpret<ContextType>(machineDef),\n  );\n  const [state, setState] = useState<HookState<ContextType>>({\n    path: service.path(),\n    context: service.context(),\n  });\n  useEffect(\n    () => service.onTransition((context: ContextType, path: string) => {\n      setState({context, path});\n    }),\n    [service, setState],\n  );\n  return [\n    {\n      ...state,\n      matchesOne: service.matchesOne,\n      matchesNone: service.matchesNone,\n    },\n    service.send,\n  ];\n}\n"],"names":["useEffect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAQgB,UAAU,CAAc,UAAmC;QAClE,IAAA,kFAAO,CAEZ;QACI,IAAA;;;UAGJ,EAHK,aAAK,EAAE,gBAGZ,CAAC;QACHA,eAAS,CACP,cAAM,OAAA,OAAO,CAAC,YAAY,CAAC,UAAC,OAAoB,EAAE,IAAY;YAC5D,QAAQ,CAAC,EAAC,OAAO,SAAA,EAAE,IAAI,MAAA,EAAC,CAAC,CAAC;SAC3B,CAAC,GAAA,EACF,CAAC,OAAO,EAAE,QAAQ,CAAC,CACpB,CAAC;QACF,OAAO;kCAEA,KAAK,KACR,UAAU,EAAE,OAAO,CAAC,UAAU,EAC9B,WAAW,EAAE,OAAO,CAAC,WAAW;YAElC,OAAO,CAAC,IAAI;SACb,CAAC;IACJ,CAAC;;;;;;;;;;;;"}